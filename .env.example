# RepoReconnoiter Environment Configuration
#
# DEVELOPMENT/TEST: Copy this file to .env and set your actual values
# PRODUCTION: Set these as environment variables in your hosting platform
#              (e.g., Render Dashboard > Environment tab)
#
# NOTE: .env files are gitignored and should NEVER be deployed to production

#--------------------------------------
# Security & Rate Limiting
#--------------------------------------

# Blocked IP addresses (comma-separated)
# Use: Emergency blocking of abusive IPs
# Format: BLOCKED_IPS="1.2.3.4,5.6.7.8,9.10.11.12"
# Note: Requires redeploy to take effect (~2-3 min on Render)
#
# When to block:
#   - Persistent attacks that bypass rate limits
#   - Discovered vulnerability being actively exploited
#   - Abusive behavior from specific IPs
#
# Alternatives:
#   - Revoke API keys (instant, no redeploy)
#   - Cloudflare blocking (instant, no redeploy)
#
# Example: BLOCKED_IPS="192.168.1.1,10.0.0.1"
BLOCKED_IPS=

#--------------------------------------
# Comparison Caching Configuration
#--------------------------------------

# Similarity threshold for fuzzy query matching (0.0 - 1.0)
# Higher values = stricter matching, fewer cache hits, fewer false positives
# Lower values = looser matching, more cache hits, higher risk of wrong results
# Recommended: 0.8 (high precision - catches exact matches + typos, ~99% accuracy)
COMPARISON_SIMILARITY_THRESHOLD=0.8

# Cache TTL in days - comparisons older than this are considered stale
# Recommended: 7 days for MVP, adjust based on how fast repos change
COMPARISON_CACHE_DAYS=7

#--------------------------------------
# Deep Analysis Configuration
#--------------------------------------

# Daily budget cap for deep analysis (expensive ~$0.05-0.10 per repo)
# Recommended: $0.50/day (~5-10 deep analyses per day)
ANALYSIS_DEEP_DAILY_BUDGET=0.50

# Rate limit per user per day for deep analysis
# Recommended: 3 (prevents individual users from exhausting daily budget)
ANALYSIS_DEEP_RATE_LIMIT_PER_USER=3

# Cache expiration for deep analysis in days (longer since expensive)
# Recommended: 30 days (deep analysis changes slowly, expensive to regenerate)
ANALYSIS_DEEP_EXPIRATION_DAYS=30

#--------------------------------------
# GitHub OAuth Configuration
#--------------------------------------

# GitHub OAuth App credentials for user authentication
# Create your OAuth app at: https://github.com/settings/developers
# Homepage URL (dev): http://localhost:3001
# Callback URL (dev): http://localhost:3001/users/auth/github/callback
# Note: In production, set these in Rails credentials, not environment variables
GITHUB_CLIENT_ID=your_github_oauth_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_client_secret

#--------------------------------------
# Mission Control (Job Dashboard) Access
#--------------------------------------

# Comma-separated list of GitHub IDs allowed to access /jobs dashboard
# Get your GitHub ID from: https://api.github.com/users/YOUR_USERNAME
# Example: ALLOWED_ADMIN_GITHUB_IDS=123456,789012
ALLOWED_ADMIN_GITHUB_IDS=

#--------------------------------------
# Analytics Configuration
#--------------------------------------

# Microsoft Clarity Project ID (for pageview tracking and session recordings)
# Get yours at: https://clarity.microsoft.com/
# Create project > Settings > Copy Project ID (e.g., "a12b3456cd")
CLARITY_PROJECT_ID=

#--------------------------------------
# Database Sync (Development Only)
#--------------------------------------

# Production database URL for syncing production data to local
# Used by: bin/rails db:sync_from_production
# Get from: Render Dashboard → Database → Connection → External Database URL
# Format: postgresql://user:password@host:port/database
# PRODUCTION_DATABASE_URL=postgresql://user:pass@host.oregon-postgres.render.com/database_name

#--------------------------------------
# Trusted API Keys (Development/Test Only)
#--------------------------------------

# ENV-based API key fallback for development/test environments
# PRODUCTION: Database keys ONLY (this ENV var is ignored for security)
# DEVELOPMENT/TEST: Can use this as a fallback before creating database keys
#
# Preferred method (all environments):
#   bin/rails api_keys:generate NAME="Next.js Development (Local)"
#   bin/rails api_keys:list
#
# Format: Comma-separated list of 64-character hex keys
# TRUSTED_API_KEYS=key1,key2,key3
#
# Note: Database keys are preferred - they provide:
#   - Usage tracking (request_count, last_used_at)
#   - Revocation without code changes
#   - Audit trail (who created what, when)
#   - BCrypt encryption (keys can't be recovered if DB compromised)

#--------------------------------------
# API Keys (Store in Rails credentials)
#--------------------------------------

# GitHub Personal Access Token (for API requests)
# Get yours at: https://github.com/settings/tokens
# GITHUB_TOKEN=your_github_token_here

# OpenAI API Key (for AI analysis)
# Get yours at: https://platform.openai.com/api-keys
# OPENAI_ACCESS_TOKEN=your_openai_key_here
